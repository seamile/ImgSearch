# ImgSearch

[üá¨üáß English](#imgsearch) ‚áå [üá®üá≥ ‰∏≠Êñá](#imgsearch-ÂõæÂÉèÊêúÁ¥¢ÂºïÊìé)

ImgSearch is a lightweight image search engine that supports image-to-image and text-to-image searches. Built on [TinyCLIP](https://github.com/wkcn/TinyCLIP) and [HNSWlib](https://github.com/nmslib/hnswlib), it's fast and resource-efficient, running on devices with just 2GB of RAM. Use it standalone or integrate it as a Python library.

## Features

- [x] Search by image: Upload a query image to find similar ones quickly
- [x] Search by text: Find images matching natural language descriptions
- [x] Image similarity comparison: Compute similarity scores (0-100%) between two images
- [x] Batch image addition: Add single files or folders (recursive), skipping duplicates automatically
- [x] Multi-database support: Create and manage multiple independent image libraries
- [x] Similarity threshold filtering: Filter search results by minimum similarity (e.g., ‚â•80%)

## Installation

### Full Installation (Client + Server)

To use the full functionality of ImgSearch (including client and server), you need to specify the `all` dependency group during installation. This will install all the dependency packages required to run the server, such as `PyTorch`, on the system.

```shell
pip install 'imgsearch[all]'
```

### Standard Installation (Client Only)

The standard installation includes only the client-side dependencies:

```shell
pip install imgsearch
```

**‚ö†Ô∏è Note**: Since the standard installation lacks PyTorch and other dependencies, you cannot run the `isearch service start` command.

### Non-CUDA environment

For users in non-CUDA environments who want to run the server, it is recommended to install the CPU version of PyTorch first, and then install ImgSearch:

```shell
# Install CPU version of PyTorch
pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu

# Install ImgSearch
pip install 'imgsearch[all]'
```

If using uv as your Python package manager:

```shell
uv pip install --torch-backend cpu imgsearch
```

## Quick Start

### 1. Service Management

ImgSearch follows a client-server architecture: the server handles indexing and search tasks, while the client manages user requests. Before using ImgSearch, start the server process.

The server supports unix domain sockets (default for local, efficient connections) or TCP binding. The default unix socket is at `~/.isearch/isearch.sock`.

#### Basic Usage

The default model is ViT-45LY (`TinyCLIP-auto-ViT-45M-32-Text-18M-LAIONYFCC400M`). See [Model Selection Guide](#model-selection-guide) for available options.

##### i. Start Service

```shell
# Start ImgSearch server with default settings
isearch service start
```

###### Optional parameters for start command

- `-B BIND`: Server binding, either `UDS` path or `IP:PORT` (e.g., `-B /path/to/isearch.sock` or `-B 127.0.0.1:5000`)
- `-b BASE_DIR`: Index database directory (default: `~/.isearch/`)
- `-m MODEL_KEY`: Model name (see [Model Selection Guide](#model-selection-guide))
- `-L LOG_LEVEL`: Log level (`debug`, `info`, `warning`, `error`, `critical`; default: `info`)

##### ii. Stop Service

```shell
isearch service stop
```

##### iii. Check Status

```shell
isearch service status
```

Example output:
```
ImgSearch service is running
* PID: 12345
* MEM: 256.3 MB
```

#### Running as a System Service

ImgSearch can run as a background system service that starts and stops with your system. On Linux, it uses `systemd`; on macOS, `launchd`. The tool auto-detects your environment ‚Äî no manual configuration needed.

##### i. Set Up Service

The `setup` command creates and starts the ImgSearch system service. It accepts the same optional parameters as the [`start` command](#optional-parameters-for-start-command).

**‚ö†Ô∏è Note**: This downloads model files to the cache directory `~/.cache/clip`. Most models range from 100 MB to 230 MB‚Äîensure you have enough disk space.

```shell
isearch service setup
```

##### ii. Remove Service

The `remove` command stops and uninstalls the ImgSearch system service. **It does not delete database files.**

```shell
isearch service remove
```

### 2. Add Images to Index

The `add` command indexes images in the specified database. It supports formats like jpg, jpeg, png, bmp, and webp. Folders are scanned recursively, with duplicates automatically filtered (based on labels).

```shell
# Add single files or folders to the default database
isearch add ./images/photo1.jpg ./pictures/

# Use filename as label (default: absolute path)
isearch add -l name ./images/

# Specify database and binding
isearch add -d my_gallery ./photos/ -B ./isearch.sock
```

The `add` command extracts 512-dimensional feature vectors from images using TinyCLIP and stores them in an HNSW index.

### 3. Search Images

The `search` subcommand handles image searches, but for ease of use, it's the default‚Äîomit it if your arguments don't match other commands.

Search command: `isearch [search] QUERY`.

#### Search by Image

```shell
# Search similar images, return top 10 results (similarity ‚â•0%)
isearch ./query.jpg

# Equivalent:
isearch search ./query.jpg

# Set minimum similarity threshold and result count
isearch -n 5 -t 80 ./query.jpg

# Automatically open result images (the Label when adding an image must be a path)
isearch -o ./query.jpg
```

#### Search by Text

```shell
# Search for "red flower" related images
isearch "red flower"

# Specify count and threshold
isearch -n 3 -t 70 "sports car"
```

Results sorted by similarity descending, show path and percentage. Example:
```
Searching sports car...
Found 5 similar images (similarity ‚â• 70.0%):
 1. /path/to/img1.jpg	92.3%
 2. /path/to/img2.png	85.1%
 3. /path/to/img3.jpg	78.4%
```

### 4. Database Management

#### View Database Info

```shell
isearch db --info
```

Example output:
```
Database "default"
* Base: /home/user/.isearch
* Size: 140915
* Capacity: 150000
```

#### List All Databases

```shell
isearch db --list
```

Output:
```
Available databases:
* default
* my_gallery
* test_db
```

#### Clear Database

```shell
# Confirm then clear
isearch db --clear -d my_db
```

**‚ö†Ô∏è Warning**: This operation is irreversible and deletes all index data.

### 5. Compare Two Images

```shell
isearch cmp ./img1.jpg ./img2.png
```

Output:
```
Similarity between images: 87.5%
```

## As a Python Module

ImgSearch can be used as a Python module in other projects.

```python
from imgsearch.client import Client

# Create client (connects to local service by default)
cli = Client(db_name='default', bind='~/.isearch/isearch.sock')

# Add images (returns count)
image_paths = ['./img1.jpg', './img2.png', './folder/']
n_added = cli.add_images(image_paths, label_type='path')  # or 'name'
print(f'Added {n_added} images for processing')

# Search by image (returns [(path, similarity%), ...] or None)
results = cli.search('./query.jpg', num=5, similarity=80)
if results:
    for path, sim in results:
        print(f"{path} (similarity: {sim}%)")
else:
    print('No matching results or search queue full')

# Search by text
results = cli.search('red apple', num=10, similarity=0)
for path, sim in results:
    print(f"{path} (similarity: {sim}%)")

# Compare similarity (returns 0-100 float)
similarity = cli.compare_images('./img1.jpg', './img2.jpg')
print(f'Similarity: {similarity}%')

# Database operations
dbs = cli.list_dbs()
print(f'Available databases: {dbs}')

info = cli.get_db_info()
print(f'Database information: {info}')

# Clear database (returns True/False)
cleared = cli.clear_db()
print(f'Clear success: {cleared}')
```

**‚ö†Ô∏è Note**: Start the service first (`isearch service start`) for module usage, or connections will fail.

## Model Selection Guide

ImgSearch supports various TinyCLIP models, with the default `ViT-45LY` offering a good balance of speed, accuracy, and resource use for most cases.

| Model    | ImageNet-1K Acc@1 (%) | MACs (G) | Throughput (pairs/s) | Recommended Scenarios                                  |
|----------|-----------------------|----------|----------------------|--------------------------------------------------------|
| ViT-8Y   | 41.1                  | 2.0      | 4,150                | Lowest resource use, fast, but slightly lower accuracy |
| RN-19L   | 56.4                  | 4.4      | 3,024                |                                                        |
| ViT-22L  | 53.7                  | 1.9      | 5,504                | Fastest option, ideal for speed-critical setups        |
| RN-30L   | 59.1                  | 6.9      | 1,811                |                                                        |
| ViT-39Y  | 63.5                  | 9.5      | 1,469                | High accuracy with moderate resources, but slower      |
| ViT-40L  | 59.8                  | 3.5      | 4,641                |                                                        |
| ViT-45L  | 61.4                  | 3.7      | 3,682                |                                                        |
| ViT-45LY | 62.7                  | 1.9      | 3,685                | **Default model**, balances speed and accuracy         |
| ViT-61L  | 62.4                  | 5.3      | 3,191                |                                                        |
| ViT-63L  | 63.9                  | 5.6      | 2,905                |                                                        |
| ViT-63LY | 64.5                  | 5.6      | 2,909                | Highest accuracy                                       |

Data source: [TinyCLIP Model Zoo](https://github.com/wkcn/TinyCLIP?tab=readme-ov-file#model-zoo). Use smaller models like ViT-8Y on low-end devices; opt for larger ones like ViT-63LY for precision-focused tasks.

To switch models, restart the service:

```shell
# Restart ImgSearch service
isearch service stop
isearch service start -m NEW_MODEL_KEY
```

---

# ImgSearch ÂõæÂÉèÊêúÁ¥¢ÂºïÊìé

[üá®üá≥ ‰∏≠Êñá](#imgsearch-ÂõæÂÉèÊêúÁ¥¢ÂºïÊìé) ‚áå [üá¨üáß English](#imgsearch)

ImgSearch ÊòØ‰∏ÄÊ¨æËΩªÈáèÁ∫ßÂõæÁâáÊêúÁ¥¢ÂºïÊìéÔºåÊîØÊåÅ‰ª•ÂõæÊêúÂõæÂíåÊñáÂ≠óÊèèËø∞ÊêúÂõæ„ÄÇÂü∫‰∫é [TinyCLIP](https://github.com/wkcn/TinyCLIP) Âíå [HNSWlib](https://github.com/nmslib/hnswlib) ÊûÑÂª∫ÔºåÈÄüÂ∫¶Âø´„ÄÅËµÑÊ∫êÂç†Áî®‰ΩéÔºåÂèØÂú® 2GB ÂÜÖÂ≠òËÆæÂ§á‰∏äËøêË°å„ÄÇÂèØ‰Ωú‰∏∫Áã¨Á´ãÊêúÁ¥¢ÂºïÊìé‰ΩøÁî®ÔºåÊàñ‰Ωú‰∏∫ Python Â∫ìÈõÜÊàêÂà∞ÂÖ∂‰ªñÁ≥ªÁªü„ÄÇ

## ÁâπÊÄß

- [x] ‰ª•ÂõæÊêúÂõæÔºö‰∏ä‰º†Êü•ËØ¢ÂõæÁâáÔºåÂø´ÈÄüÊâæÂà∞Áõ∏‰ººÂõæÂÉè
- [x] ÊñáÂ≠óÊêúÂõæÔºöÈÄöËøáËá™ÁÑ∂ËØ≠Ë®ÄÊèèËø∞ÊêúÁ¥¢Áõ∏ÂÖ≥ÂõæÁâá
- [x] ÂõæÂÉèÁõ∏‰ººÂ∫¶ÊØîËæÉÔºöËÆ°ÁÆó‰∏§Âº†ÂõæÁâáÁöÑÁõ∏‰ººÂ∫¶ÂàÜÊï∞Ôºà0-100%Ôºâ
- [x] ÊâπÈáèÊ∑ªÂä†ÂõæÁâáÔºöÊîØÊåÅÂçï‰∏™Êñá‰ª∂ÊàñÊñá‰ª∂Â§πÔºàÈÄíÂΩíÊ∑ªÂä†ÔºâÔºåËá™Âä®Ë∑≥ËøáÈáçÂ§ç
- [x] Â§öÊï∞ÊçÆÂ∫ìÊîØÊåÅÔºöÂèØÂàõÂª∫ÂíåÁÆ°ÁêÜÂ§ö‰∏™Áã¨Á´ãÂõæÁâáÂ∫ì
- [x] Áõ∏‰ººÂ∫¶ÈòàÂÄºËøáÊª§ÔºöÊêúÁ¥¢ÁªìÊûúÂèØËÆæÁΩÆÊúÄÂ∞èÁõ∏‰ººÂ∫¶ÔºàÂ¶Ç ‚â•80%Ôºâ

## ÂÆâË£Ö

### ÂÆåÊï¥ÂÆâË£ÖÔºàÂÆ¢Êà∑Á´Ø + ÊúçÂä°Á´ØÔºâ

Ë¶Å‰ΩøÁî® ImgSearch ÁöÑÂÆåÊï¥ÂäüËÉΩÔºàÂåÖÂê´ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÔºâÔºåÈúÄË¶ÅÂú®ÂÆâË£ÖÊó∂ÊåáÂÆö `all` ‰æùËµñÁªÑÔºåËøô‰ºöÂ∞ÜÊúçÂä°Á´ØËøêË°åÊâÄÈúÄÁöÑ `PyTorch` Á≠â‰æùËµñÂåÖÂÖ®ÈÉ®ÂÆâË£ÖÂà∞Á≥ªÁªü‰∏äÔºö

```shell
pip install 'imgsearch[all]'
```

### Ê†áÂáÜÂÆâË£ÖÔºà‰ªÖÂÆ¢Êà∑Á´ØÔºâ

Ê†áÂáÜÂÆâË£Ö‰ªÖÂåÖÂê´ÂÆ¢Êà∑Á´ØÊâÄÈúÄÁöÑ‰æùËµñÔºö

```shell
pip install imgsearch
```

**‚ö†Ô∏è Ê≥®ÊÑè**ÔºöÁî±‰∫éÊ†áÂáÜÂÆâË£ÖÁº∫Â∞ë Pytorch Á≠â‰æùËµñÈ°πÔºåÊâÄ‰ª•Êó†Ê≥ïÊâßË°å `isearch service start` ÂëΩ‰ª§„ÄÇ

### Èùû CUDA ÁéØÂ¢É

ÂØπ‰∫éÈùû CUDA ÁéØÂ¢ÉÁöÑÁî®Êà∑Â¶ÇÊûúË¶ÅËøêË°åÊúçÂä°Á´ØÊó∂ÔºåÂª∫ËÆÆÂÖàÂÆâË£Ö CPU Áâà PyTorchÔºåÁÑ∂ÂêéÂÜçÂÆâË£Ö ImgSearchÔºö

```shell
# ÂÆâË£Ö CPU Áâà PyTorch
pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu

# ÂÆâË£Ö ImgSearch
pip install 'imgsearch[all]'
```

‰ΩøÁî® uv ‰Ωú‰∏∫ Python ÂåÖÁÆ°ÁêÜÂ∑•ÂÖ∑ÁöÑÂèØ‰ª•ËøôÊ†∑ÂÆâË£ÖÔºö

```shell
uv pip install --torch-backend cpu 'imgsearch[all]'
```

## ‰ΩøÁî®ÊñπÊ≥ï

### 1. ÊúçÂä°ÁÆ°ÁêÜ

ImgSearch Êï¥‰Ωì‰∏∫ C-S Êû∂ÊûÑÔºåÊúçÂä°Á´ØÂ§ÑÁêÜÁ¥¢ÂºïÂíåÊêúÁ¥¢ÔºåÂÆ¢Êà∑Á´ØÂ§ÑÁêÜÁî®Êà∑ËØ∑Ê±Ç„ÄÇ‰ΩøÁî®ÂâçÈúÄÂÖàÂºÄÂêØ‰ªñÁöÑÊúçÂä°Á´ØÁ®ãÂ∫è„ÄÇ

ImgSearch ÊúçÂä°Á´ØÊîØÊåÅ Unix ÂüüÂ•óÊé•Â≠óÊàñ TCP ÁªëÂÆö„ÄÇÈªòËÆ§‰ΩøÁî® Unix ÂüüÂ•óÊé•Â≠óËøêË°åÂú®Êú¨Âú∞ÔºåÁ®≥ÂÆö‰∏îÈ´òÊïà„ÄÇÈªòËÆ§ UDS ‰ΩçÁΩÆ‰∏∫ `~/.isearch/isearch.sock`„ÄÇ

#### Âü∫Êú¨Áî®Ê≥ï

##### i. ÂêØÂä®ÊúçÂä°

ÈªòËÆ§Ê®°Âûã‰∏∫ ViT-45LYÔºà`TinyCLIP-auto-ViT-45M-32-Text-18M-LAIONYFCC400M`ÔºâÔºåÂèØÁî®Ê®°ÂûãÂàóË°®ËØ¶ËßÅ [Ê®°ÂûãÈÄâÊã©ÊåáÂçó](#Ê®°ÂûãÈÄâÊã©ÊåáÂçó)„ÄÇ

```shell
# ‰ΩøÁî®ÈªòËÆ§ÂèÇÊï∞ÂêØÂä® Img Search ÊúçÂä°
isearch service start
```

###### start ÂëΩ‰ª§ÂèØÈÄâÂèÇÊï∞

- `-B BIND`:       ÊúçÂä°Á´ØÁªëÂÆöÊñπÂºèÔºåÂèØÈÄâ `UDS` Êàñ `IP:PORT` ‰∏§ÁßçÊ†ºÂºè„ÄÇÂ¶ÇÔºö`-B /path/to/isearch.sock` Êàñ `-B 127.0.0.1:5000`
- `-b BASE_DIR`:   Á¥¢ÂºïÊï∞ÊçÆÂ∫ìÁõÆÂΩïÔºåÈªòËÆ§‰∏∫ `~/.isearch/`
- `-m MODEL_KEY`:  Ê®°ÂûãÂêçÁß∞ÔºåÂèØÈÄâÈ°πËØ¶ËßÅ [Ê®°ÂûãÈÄâÊã©ÊåáÂçó](#Ê®°ÂûãÈÄâÊã©ÊåáÂçó)
- `-L LOG_LEVEL`:  Êó•ÂøóÁ∫ßÂà´ÔºåÂèØÈÄâ `debug`„ÄÅ`info`„ÄÅ`warning`„ÄÅ`error`„ÄÅ`critical`„ÄÇ

##### ii. ÂÅúÊ≠¢ÊúçÂä°

```shell
isearch service stop
```

##### iii. Êü•ÁúãÁä∂ÊÄÅ

```shell
isearch service status

# ËæìÂá∫Ôºö
iSearch service is running
* PID: 12345
* MEM: 256.3 MB
```

#### Â∞Ü ImgSearch ‰Ωú‰∏∫Á≥ªÁªüÊúçÂä°Âú®ÂêéÂè∞ËøêË°å

ImgSearch ÂèØ‰ª•‰Ωú‰∏∫Á≥ªÁªüÊúçÂä°Âú®ÂêéÂè∞ËøêË°åÔºåÂπ∂ÂèØ‰ª•ÈöèÁ≥ªÁªüËá™Âä®ÂêØÂä®ÂíåÂÅúÊ≠¢„ÄÇÂú® Linux ‰∏äÔºåImgSearch ‰ΩøÁî® `systemd` Êù•ÁÆ°ÁêÜÂÆàÊä§ËøõÁ®ãÔºåÂú® macOS ‰∏äÂàô‰ΩøÁî® `launchd`„ÄÇImgSearch ‰ºöËá™Âä®ËØÜÂà´ËøêË°åÁéØÂ¢ÉÔºåÊó†ÈúÄÊâãÂä®ÊåáÂÆöÊúçÂä°ÁÆ°ÁêÜÁ®ãÂ∫è„ÄÇ

##### i. ËÆæÁΩÆÊúçÂä°

`setup` ÂëΩ‰ª§Áî®‰∫éÂàõÂª∫ÂíåÂêØÂä® ImgSearch ÁöÑÁ≥ªÁªüÊúçÂä°„ÄÇÂÆÉÁöÑÂèØÈÄâÂèÇÊï∞‰∏é [`start` ÂëΩ‰ª§](#start-ÂëΩ‰ª§ÂèØÈÄâÂèÇÊï∞) ‰∏ÄÊ†∑„ÄÇ

**‚ö†Ô∏è Ê≥®ÊÑè**ÔºöÊ≠§Êìç‰Ωú‰ºö‰∏ãËΩΩÊ®°ÂûãÊñá‰ª∂Âà∞ÁºìÂ≠òÁõÆÂΩï `~/.cache/clip`ÔºåÂ§ßÈÉ®ÂàÜÊ®°ÂûãÁöÑÂ§ßÂ∞èÂú® 100 MB Ëá≥ 230 MB ‰πãÈó¥ÔºåËØ∑Á°Æ‰øùÁ£ÅÁõòÁ©∫Èó¥ÂÖÖË∂≥„ÄÇ

```shell
isearch service setup
```

##### ii. ÁßªÈô§ÊúçÂä°

`remove` ÂëΩ‰ª§Áî®‰∫éÂÅúÊ≠¢ÂíåÂç∏ËΩΩ ImgSearch ÁöÑÁ≥ªÁªüÊúçÂä°Ôºå‰ΩÜ **‰∏ç‰ºöÂà†Èô§** Êï∞ÊçÆÂ∫ìÊñá‰ª∂„ÄÇ

```shell
isearch service remove
```

### 2. Ê∑ªÂä†ÂõæÁâáÂà∞Á¥¢Âºï

`add` ÂëΩ‰ª§Áî®‰∫éÂ∞ÜÂõæÁâáÊ∑ªÂä†Âà∞ÊåáÂÆöÊï∞ÊçÆÂ∫ì„ÄÇÊîØÊåÅ jpg, jpeg, png, bmp, webp Á≠âÊ†ºÂºè„ÄÇÊñá‰ª∂Â§π‰ºöÈÄíÂΩíÊ∑ªÂä†ÊâÄÊúâÂõæÁâáÔºåËá™Âä®ËøáÊª§ÈáçÂ§çÈ°πÔºàÂü∫‰∫é LabelÔºâ„ÄÇ

```shell
# Ê∑ªÂä†Âçï‰∏™Êñá‰ª∂ÊàñÊñá‰ª∂Â§πÂà∞ÈªòËÆ§Êï∞ÊçÆÂ∫ì
isearch add ./images/photo1.jpg ./pictures/

# ‰ΩøÁî®Êñá‰ª∂Âêç‰Ωú‰∏∫Ê†áÁ≠æÔºàÈªòËÆ§ÔºöÁªùÂØπË∑ØÂæÑÔºâ
isearch add -l name ./images/

# ÊåáÂÆöÊï∞ÊçÆÂ∫ìÂíåÁªëÂÆö
isearch add -d my_gallery ./photos/ -B ./isearch.sock
```

`add` ÂëΩ‰ª§‰ºöÈÄöËøá TinyCLIP ÊèêÂèñÂõæÁâáÁöÑÁâπÂæÅÔºà512 Áª¥ÂêëÈáèÔºâÔºåÂπ∂Â≠òÂÇ®Âú® HNSWlib Á¥¢Âºï‰∏≠„ÄÇ

### 3. ÊêúÁ¥¢ÂõæÁâá

ÊêúÁ¥¢ÂõæÁâá‰ΩøÁî® `search` Â≠êÂëΩ‰ª§Ôºå‰∏∫‰∫ÜÊìç‰ΩúÊñπ‰æøÔºåisearch Â∑≤Â∞ÜÂÆÉËÆæ‰∏∫ÈªòËÆ§Â≠êÂëΩ‰ª§Ôºå‰ΩøÁî®Êó∂ÂèØ‰ª•ÁúÅÁï•„ÄÇ

ÊêúÂõæÊñπÂºèÔºö`isearch [search] QUERY`„ÄÇ

#### ‰ª•ÂõæÊêúÂõæ

```shell
# ÊêúÁ¥¢Áõ∏‰ººÂõæÁâáÔºåÈªòËÆ§ËøîÂõûÂâç 10 ‰∏™ÁªìÊûú
isearch ./query.jpg

# Á≠â‰ª∑‰∫éÔºö
isearch search ./query.jpg

# ËÆæÁΩÆÊúÄÂ∞èÁõ∏‰ººÂ∫¶ÈòàÂÄºÂíåÁªìÊûúÊï∞Èáè
isearch -n 5 -t 80 ./query.jpg

# Ëá™Âä®ÊâìÂºÄÁªìÊûúÂõæÁâáÔºàÊ∑ªÂä†ÂõæÁâáÊó∂ÁöÑ Label ÂøÖÈ°ªÊòØ pathÔºâ
isearch -o ./query.jpg
```

#### ‰ª•ÂÖ≥ÈîÆÂ≠óÊêúÂõæ

```shell
# ÊêúÁ¥¢ "red flower" Áõ∏ÂÖ≥ÂõæÁâá
isearch "red flower"

# ÊåáÂÆöÊï∞ÈáèÂíåÈòàÂÄº
isearch -n 3 -t 70 "sports car"
```

ÊêúÁ¥¢ÁªìÊûúÊåâÁõ∏‰ººÂ∫¶ÈôçÂ∫èÊéíÂàóÔºåÊòæÁ§∫Ë∑ØÂæÑÂíåÁõ∏‰ººÂ∫¶„ÄÇÁ§∫‰æãÔºö

```
Searching sports car...
Found 3 similar images (similarity ‚â• 70%):
 1. /path/to/img1.jpg	92.3%
 2. /path/to/img2.png	85.1%
 3. /path/to/img3.jpg	78.4%
```

### 4. Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜ

#### Êü•ÁúãÊï∞ÊçÆÂ∫ì‰ø°ÊÅØ

```shell
isearch db --info
```

ËæìÂá∫Á§∫‰æãÔºö
```
Database "default"
* Base: /home/user/.isearch
* Size: 140915
* Capacity: 150000
```

#### ÂàóÂá∫ÊâÄÊúâÊï∞ÊçÆÂ∫ì

```shell
isearch db --list
```

ËæìÂá∫Ôºö
```
Available databases:
* default
* my_gallery
* test_db
```

#### Ê∏ÖÁ©∫Êï∞ÊçÆÂ∫ì

```shell
# Á°ÆËÆ§ÂêéÊ∏ÖÁ©∫
isearch db --clear -d my_db
```

**‚ö†Ô∏è Ë≠¶Âëä**ÔºöÊ≠§Êìç‰Ωú‰∏çÂèØÈÄÜÔºå‰ºöÂà†Èô§ÊâÄÊúâÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇ

### 5. ÊØîËæÉ‰∏§Âº†ÂõæÁâá

```shell
isearch cmp ./img1.jpg ./img2.png
```

ËæìÂá∫Ôºö
```
Similarity between images: 87.5%
```

## ‰Ωú‰∏∫ Python Ê®°Âùó‰ΩøÁî®

ImgSearch ÂèØ‰Ωú‰∏∫ Python Ê®°ÂùóÂØºÂÖ•Âà∞ÂÖ∂‰ªñÈ°πÁõÆ‰∏≠„ÄÇ

```python
from imgsearch.client import Client

# ÂàõÂª∫ÂÆ¢Êà∑Á´ØÔºàÈªòËÆ§ËøûÊé•Êú¨Âú∞ÊúçÂä°Ôºâ
cli = Client(db_name='default', bind='~/.isearch/isearch.sock')

# Ê∑ªÂä†ÂõæÁâáÔºàËøîÂõûÊ∑ªÂä†Êï∞ÈáèÔºâ
image_paths = ['./img1.jpg', './img2.png', './folder/']
n_added = cli.add_images(image_paths, label_type='path')  # Êàñ 'name'
print(f'Â∑≤Ê∑ªÂä† {n_added} Âº†ÂõæÁâáËøõË°åÂ§ÑÁêÜ')

# ‰ª•ÂõæÊêúÂõæÔºàËøîÂõû [(Ë∑ØÂæÑ, Áõ∏‰ººÂ∫¶%), ...] Êàñ NoneÔºâ
results = cli.search('./query.jpg', num=5, similarity=80)
if results:
    for path, sim in results:
        print(f"{path} (Áõ∏‰ººÂ∫¶: {sim}%)")
else:
    print('Êó†ÂåπÈÖçÁªìÊûúÊàñÊêúÁ¥¢ÈòüÂàóÊª°')

# ‰ª•ÊñáÂ≠óÊêúÂõæ
results = cli.search('red apple', num=10, similarity=0)
for path, sim in results:
    print(f"{path} (Áõ∏‰ººÂ∫¶: {sim}%)")

# ÊØîËæÉÁõ∏‰ººÂ∫¶ÔºàËøîÂõû 0-100 floatÔºâ
similarity = cli.compare_images('./img1.jpg', './img2.jpg')
print(f'Áõ∏‰ººÂ∫¶: {similarity}%')

# Êï∞ÊçÆÂ∫ìÊìç‰Ωú
dbs = cli.list_dbs()
print(f'ÂèØÁî®Êï∞ÊçÆÂ∫ì: {dbs}')

info = cli.get_db_info()
print(f'Êï∞ÊçÆÂ∫ì‰ø°ÊÅØ: {info}')

# Ê∏ÖÁ©∫Êï∞ÊçÆÂ∫ìÔºàËøîÂõû True/FalseÔºâ
cleared = cli.clear_db()
print(f'Ê∏ÖÁ©∫ÊàêÂäü: {cleared}')
```

**‚ö†Ô∏è Ê≥®ÊÑè**ÔºöÊ®°Âùó‰ΩøÁî®ÈúÄÂÖàÂêØÂä®ÊúçÂä°Ôºà`isearch service start`ÔºâÔºåÂê¶ÂàôËøûÊé•Â§±Ë¥•„ÄÇ

## Ê®°ÂûãÈÄâÊã©ÊåáÂçó

ImgSearch ÊîØÊåÅÂ§öÁßç TinyCLIP Ê®°ÂûãÔºåÈªòËÆ§ÁöÑ `ViT-45LY` Âπ≥Ë°°‰∫ÜÈÄüÂ∫¶„ÄÅÂáÜÁ°ÆÁéáÂíåËµÑÊ∫êÂç†Áî®ÔºåÈÄÇÁî®‰∫éÂ§ßÂ§öÊï∞Âú∫ÊôØ„ÄÇ

| Ê®°Âûã     | ImageNet-1K Acc@1 (%) | MACs (G) | Throughput (pairs/s) | Êé®ËçêÂú∫ÊôØ                           |
|----------|-----------------------|----------|----------------------|------------------------------------|
| ViT-8Y   | 41.1                  | 2.0      | 4,150                | ËµÑÊ∫êÊ∂àËÄóÊúÄ‰ΩéÔºåÈÄüÂ∫¶Âø´ÔºåÂáÜÁ°ÆÂ∫¶Áï•‰Ωé   |
| RN-19L   | 56.4                  | 4.4      | 3,024                |                                    |
| ViT-22L  | 53.7                  | 1.9      | 5,504                | ÈÄüÂ∫¶ÊúÄÂø´ÔºåÈÄÇÂêàÂØπÈÄüÂ∫¶Ë¶ÅÊ±ÇÈ´òÁöÑÂú∫ÊôØ   |
| RN-30L   | 59.1                  | 6.9      | 1,811                |                                    |
| ViT-39Y  | 63.5                  | 9.5      | 1,469                | ÂáÜÁ°ÆÂ∫¶È´òÔºåËµÑÊ∫êÊ∂àËÄó‰∏≠Á≠âÔºå‰ΩÜÈÄüÂ∫¶ËæÉÊÖ¢ |
| ViT-40L  | 59.8                  | 3.5      | 4,641                |                                    |
| ViT-45L  | 61.4                  | 3.7      | 3,682                |                                    |
| ViT-45LY | 62.7                  | 1.9      | 3,685                | **ÈªòËÆ§Ê®°Âûã**ÔºåÈÄüÂ∫¶‰∏éÁ≤æÂ∫¶ÂÖºÂ§á       |
| ViT-61L  | 62.4                  | 5.3      | 3,191                |                                    |
| ViT-63L  | 63.9                  | 5.6      | 2,905                |                                    |
| ViT-63LY | 64.5                  | 5.6      | 2,909                | ÂáÜÁ°ÆÂ∫¶ÊúÄÈ´ò                         |

Êï∞ÊçÆÊù•Ê∫êÔºö[TinyCLIP Ê®°ÂûãÂ∫ì](https://github.com/wkcn/TinyCLIP?tab=readme-ov-file#model-zoo)„ÄÇÈÄâÊã©Â∞èÊ®°ÂûãÔºàÂ¶Ç ViT-8YÔºâÁî®‰∫é‰ΩéÁ´ØËÆæÂ§áÔºõÂ§ßÊ®°ÂûãÔºàÂ¶Ç ViT-63LYÔºâÁî®‰∫éÈ´òÁ≤æÂ∫¶ÈúÄÊ±Ç„ÄÇ

ÂàáÊç¢Ê®°ÂûãÈúÄÈáçÂêØÊúçÂä°Ôºö

```shell
# ÈáçÂêØ isearch ÊúçÂä°
isearch service stop
isearch service start -m NEW_MODEL_KEY
```
